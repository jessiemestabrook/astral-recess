(this["webpackJsonpastral-recess"]=this["webpackJsonpastral-recess"]||[]).push([[0],{30:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(24),o=n.n(i),c=n(4),l=n(21),u=n(29),s=n(5),m=n.n(s),p=n(7),d=m.a.mark(h),f=m.a.mark(O),b=m.a.mark(y),x=m.a.mark(j),g=m.a.mark(w);function v(e,t,n){console.log("doSetMasterVolume"),console.log("audioContext.currentTime is",t.currentTime),e.gain.linearRampToValueAtTime(n,t.currentTime+.1)}function h(e,t,n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.payload,a.next=3,Object(p.b)(v,e,t,r);case 3:case"end":return a.stop()}}),d)}function O(e,t){var n,r,a,i;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=t.payload,r=n.oscillatorIndex,a=n.parameter,i=n.value,e[r][a].value=i;case 3:case"end":return o.stop()}}),f)}function y(){var e,t,n,r,a,i,o,c,l,u,s,d;return m.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return e=window.AudioContext||window.webkitAudioContext,t=new e,(n=t.createOscillator()).type="sine",n.frequency.value=72,(r=t.createStereoPanner()).pan.setValueAtTime(-1,t.currentTime),n.connect(r),n.start(),(a=t.createOscillator()).type="sine",a.frequency.value=71.6,(i=t.createStereoPanner()).pan.setValueAtTime(1,t.currentTime),a.connect(i),a.start(),4096,o=function(){var e,n,r,a,i,o,c;e=n=r=a=i=o=c=0;var l=t.createScriptProcessor(4096,1,1);return l.onaudioprocess=function(t){for(var l=t.outputBuffer.getChannelData(0),u=0;u<4096;u++){var s=2*Math.random()-1;e=.99886*e+.0555179*s,n=.99332*n+.0750759*s,r=.969*r+.153852*s,a=.8665*a+.3104856*s,i=.55*i+.5329522*s,o=-.7616*o-.016898*s,l[u]=e+n+r+a+i+o+c+.5362*s,l[u]*=.11,c=.115926*s}},l}(),c=t.createBiquadFilter(),l=t.createGain(),o.connect(c),c.connect(l),c.type="lowpass",c.frequency.value=5e3,c.Q.value=0,l.gain.value=.01,(u=t.createGain()).gain.value=0,n.detune.setValueAtTime(-19,t.currentTime),r.connect(u),i.connect(u),l.connect(u),(s=t.createAnalyser()).fftSize=2048,u.connect(s),s.connect(t.destination),d=[n,a,l,c],m.next=39,Object(p.c)({type:"@action.initializeApp"});case 39:return m.next=41,Object(p.c)({type:"@action.createVisualizer",payload:s});case 41:return m.next=43,Object(p.d)("@action.mixer.setMasterVolume",h,u,t);case 43:return m.next=45,Object(p.d)("@action.setOscillatorParameter",O,d);case 45:case"end":return m.stop()}}),b)}function j(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)("@action.grantUserPermissionForAudio",y);case 2:case"end":return e.stop()}}),x)}function w(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([j()]);case 2:case"end":return e.stop()}}),g)}var k=Object(u.a)(),E=[k],P={appIsInitialized:!1,initializeApp:Object(c.b)((function(e){e.appIsInitialized=!0})),transport:{isPlaying:!1,isPaused:!0,isStopped:!0,play:Object(c.b)((function(e){e.isPlaying=!0,e.isPaused=!1,e.isStopped=!1})),pause:Object(c.b)((function(e){e.isPlaying=!1,e.isPaused=!0,e.isStopped=!1})),stop:Object(c.b)((function(e){e.isPlaying=!1,e.isPaused=!0,e.isStopped=!0}))},mixer:{tracks:[],createTrack:Object(c.b)((function(e){e.tracks=[].concat(Object(l.a)(e.tracks),[{volume:.5,panning:0}])})),setTrackVolume:Object(c.b)((function(e,t){var n=t.trackIndex,r=t.volume;e.tracks[n].volume=r})),setTrackPanning:Object(c.b)((function(e,t){var n=t.trackIndex,r=t.panning;e.tracks[n].panning=r})),masterVolume:0,setMasterVolume:Object(c.b)((function(e,t){e.masterVolume=t}))},oscillators:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0}],setOscillatorParameter:Object(c.b)((function(e,t){var n=t.oscillatorIndex,r=t.parameter,a=t.value;e.oscillators[n][r]=a})),visualizer:null,createVisualizer:Object(c.b)((function(e,t){e.visualizer=t})),hasUserPermissionForAudio:!1,grantUserPermissionForAudio:Object(c.b)((function(e){e.hasUserPermissionForAudio=!0})),theme:"light",toggleTheme:Object(c.b)((function(e){e.theme="light"===e.theme?"dark":"light"})),errors:["Must get permission to use AudioContext."],createError:Object(c.b)((function(e,t){e.errors=[].concat(Object(l.a)(e.errors),[t])}))},T=Object(c.c)(P,{middleware:E});k.run(w);var S=T,A=n(8),C=n(9);function I(){var e=Object(A.a)(['\n  font-size: 2rem;\n  font-family: "Roboto Mono";\n  font-weight: 400;\n  font-style: normal;\n']);return I=function(){return e},e}var V=C.a.button(I()),z=n(17),B=n(12);function F(){var e=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return F=function(){return e},e}function R(){var e=Object(A.a)(["\n  display: block;\n  text-align: center;\n"]);return R=function(){return e},e}function q(){var e=Object(A.a)(["\n  margin-right: 100px;\n"]);return q=function(){return e},e}function D(){var e=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  margin: 20px;\n  padding: 20px;\n"]);return D=function(){return e},e}var M=C.a.div(D()),U=C.a.div(q()),G=C.a.label(R()),Q=C.a.div(F());var W=function(){var e=Object(c.e)((function(e){return e.visualizer}));console.log("visualizer is",e);var t=Object(r.useRef)();Object(r.useEffect)((function(){if(t&&t.current){var n=t.current,r=n.getContext("2d"),a=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}(r),i=getComputedStyle(n).getPropertyValue("width").slice(0,-2),o=getComputedStyle(n).getPropertyValue("height").slice(0,-2);n.width=i*a,n.height=o*a,n.style.width="".concat(i,"px"),n.style.height="".concat(o,"px");var c;return function t(){var a=e.frequencyBinCount,i=new Uint8Array(a);e.getByteTimeDomainData(i),e.getByteTimeDomainData(i),r.fillStyle="rgb(200, 200, 200)",r.fillRect(0,0,n.width,n.height),r.lineWidth=2,r.strokeStyle="rgb(0, 0, 0)",r.beginPath();for(var o=1*n.width/a,l=0,u=0;u<a;u++){var s=i[u]/128*n.height/2;0===u?r.moveTo(l,s):r.lineTo(l,s),l+=o}r.lineTo(n.width,n.height/2),r.stroke(),c=requestAnimationFrame(t)}(),function(){cancelAnimationFrame(c)}}})),Object(B.a)({},Object(c.e)((function(e){return e.transport})),{},Object(c.d)((function(e){return e.transport})));var n=Object(B.a)({},Object(c.e)((function(e){return e.mixer})),{},Object(c.d)((function(e){return e.mixer}))),i=(Object(c.e)((function(e){return e.theme})),Object(c.d)((function(e){return e.toggleTheme})),Object(c.e)((function(e){return e.hasUserPermissionForAudio}))),o=Object(c.d)((function(e){return e.grantUserPermissionForAudio}));return i?a.a.createElement("div",null,a.a.createElement(M,null,a.a.createElement(U,null,a.a.createElement(G,null,"left oscillator"),a.a.createElement(Q,null,a.a.createElement(H,{oscillatorIndex:0,parameter:"frequency",step:.001,min:20,max:300}),a.a.createElement(H,{oscillatorIndex:0,parameter:"detune",step:.001,min:-50,max:50}))),a.a.createElement(U,null,a.a.createElement(G,null,"right oscillator"),a.a.createElement(Q,null,a.a.createElement(H,{oscillatorIndex:1,parameter:"frequency",step:.001,min:20,max:300}),a.a.createElement(H,{oscillatorIndex:1,parameter:"detune",step:.001,min:-50,max:50}))),a.a.createElement(U,null,a.a.createElement(G,null,"pink noise"),a.a.createElement(Q,null,a.a.createElement(H,{oscillatorIndex:3,parameter:"frequency",step:.001,min:1,max:1e4}),a.a.createElement(H,{oscillatorIndex:3,parameter:"Q",step:.001,min:0,max:15}),a.a.createElement(H,{oscillatorIndex:2,parameter:"gain",step:.001,min:0,max:.25}))),a.a.createElement($,{name:"master volume",step:1e-4,min:0,max:1,values:[n.masterVolume],onChange:function(e){var t=Object(z.a)(e,1)[0];return n.setMasterVolume(t)}})),a.a.createElement("canvas",{ref:t,id:"visualizer",style:{width:"500px",height:"500px"}})):a.a.createElement(V,{onClick:function(){return o()}},"Grant permission for audio")},J=n(14);var $=function(e){var t=e.parameter,n=e.step,r=e.min,i=e.max,o=e.values,c=e.onChange;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px"}},a.a.createElement(J.Range,{step:n,min:r,max:i,direction:J.Direction.Up,values:o,onChange:c,renderTrack:function(e){var t=e.props,n=e.children;return a.a.createElement("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(B.a)({},t.style,{flexGrow:1,width:"36px",display:"flex",justifyContent:"center",height:"300px"})},a.a.createElement("div",{ref:t.ref,style:{width:"5px",height:"100%",borderRadius:"4px",background:Object(J.getTrackBackground)({colors:["#548BF4","#ccc"],values:o,min:r,max:i,direction:J.Direction.Up}),alignSelf:"center"}},n))},renderThumb:function(e){var t=e.props,n=e.isDragged;return a.a.createElement("div",Object.assign({},t,{style:Object(B.a)({},t.style,{height:"42px",width:"42px",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA"})}),a.a.createElement("div",{style:{width:"16px",height:"5px",backgroundColor:n?"#548BF4":"#CCC"}}))}}),a.a.createElement("label",null,t,a.a.createElement("br",null),o[0]))};var H=function(e){var t=e.oscillatorIndex,n=e.parameter,r=e.step,i=e.min,o=e.max,l={parameter:n,step:r,min:i,max:o},u=Object(c.e)((function(e){return e.oscillators})),s=Object(c.d)((function(e){return e.setOscillatorParameter}));return a.a.createElement($,Object.assign({},l,{values:[u[t][n]],onChange:function(e){var r=Object(z.a)(e,1)[0];return s({oscillatorIndex:t,parameter:n,value:r})}}))};var K=function(){return a.a.createElement(c.a,{store:S},a.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(40);o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.088a8c45.chunk.js.map