{"version":3,"sources":["sagas/rootSaga.js","store.js","Components/Button.js","Components/Styled.js","Components/Layout.js","Components/VerticalRange.js","Components/OscillatorParameterRange.js","App.js","serviceWorker.js","index.js"],"names":["setMasterVolume","setOscillatorParameter","initializeAudioSaga","watchForUserPermissionForAudio","rootSaga","doSetMasterVolume","masterVolume","audioContext","value","console","log","currentTime","gain","linearRampToValueAtTime","payload","call","oscillators","oscillatorIndex","parameter","AudioContext","window","webkitAudioContext","oscillator1","createOscillator","oscillator1Gain","createGain","oscillator1Visualizer","createAnalyser","oscillator1Panner","createStereoPanner","type","frequency","pan","setValueAtTime","connect","start","oscillator2","oscillator2Gain","oscillator2Visualizer","oscillator2Panner","pinkNoise","b0","b1","b2","b3","b4","b5","b6","node","createScriptProcessor","onaudioprocess","e","output","outputBuffer","getChannelData","i","white","Math","random","pinkNoiseFilter","createBiquadFilter","pinkNoiseVolume","Q","detune","visualizer","destination","put","takeEvery","all","sagaMiddleware","createSagaMiddleware","middleware","model","appIsInitialized","initializeApp","action","state","transport","isPlaying","isPaused","isStopped","play","pause","stop","mixer","createVisualizer","createOsc1Visualizer","createOsc2Visualizer","hasUserPermissionForAudio","grantUserPermissionForAudio","theme","toggleTheme","errors","createError","store","createStore","run","Button","styled","button","ControlsWrapper","div","ControlGroup","ControlLabel","label","Controls","useVisualizer","canvasRef","current","requestId","canvas","context","getContext","ratio","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","devicePixelRatio","getPixelRatio","width","getComputedStyle","getPropertyValue","slice","height","style","render","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteTimeDomainData","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","sliceWidth","x","y","moveTo","lineTo","stroke","requestAnimationFrame","cancelAnimationFrame","Layout","useStoreState","useRef","osc1Ref","osc2Ref","useEffect","useStoreActions","actions","step","min","max","name","values","onChange","ref","id","onClick","VerticalRange","display","flexDirection","alignItems","margin","direction","Direction","Up","renderTrack","props","children","onMouseDown","onTouchStart","flexGrow","justifyContent","borderRadius","background","getTrackBackground","colors","alignSelf","renderThumb","isDragged","backgroundColor","boxShadow","OscillatorParameterRange","oscillatorProps","App","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.f261fab6.chunk.js","sourcesContent":["import { call, delay, put, takeEvery, all } from 'redux-saga/effects'\n\nfunction doSetMasterVolume(masterVolume, audioContext, value) {\n  console.log('doSetMasterVolume');\n  console.log('audioContext.currentTime is', audioContext.currentTime);\n  masterVolume.gain.linearRampToValueAtTime(value, audioContext.currentTime + 0.1);\n}\n\nfunction* setMasterVolume(masterVolume, audioContext, { payload }) {\n  yield call(doSetMasterVolume, masterVolume, audioContext, payload);\n}\n\nfunction* setOscillatorParameter(oscillators, { payload }) {\n  const { oscillatorIndex, parameter, value } = payload;\n  oscillators[oscillatorIndex][parameter].value = value;\n}\n\n\n/*\n * INITIALIZE ALL THE WEB AUDIO TINGS\n */\nfunction* initializeAudioSaga() {\n\n  // create audio context\n  const AudioContext = window.AudioContext || window.webkitAudioContext;\n  const audioContext = new AudioContext();\n\n\n  /*\n   * Oscillator 1 + panner, visualizer\n   */\n  const oscillator1 = audioContext.createOscillator();\n  const oscillator1Gain = audioContext.createGain();\n  const oscillator1Visualizer = audioContext.createAnalyser();\n  const oscillator1Panner = audioContext.createStereoPanner();\n  oscillator1.type = 'sine';\n  oscillator1.frequency.value = 72; // value in hertz\n  oscillator1Gain.gain.value = 0.5;\n  oscillator1Panner.pan.setValueAtTime(-1, audioContext.currentTime);\n  // connections\n  oscillator1.connect(oscillator1Gain);\n  oscillator1Gain.connect(oscillator1Visualizer);\n  oscillator1Visualizer.connect(oscillator1Panner);\n  oscillator1.start();\n\n\n  /*\n   * Oscillator 2 + panner, visualizer\n   */\n  const oscillator2 = audioContext.createOscillator();\n  const oscillator2Gain = audioContext.createGain();\n  const oscillator2Visualizer = audioContext.createAnalyser();\n  const oscillator2Panner = audioContext.createStereoPanner();\n  oscillator2.type = 'sine';\n  oscillator2.frequency.value = 71.6; // value in hertz\n  oscillator2Gain.gain.value = 0.5;\n  oscillator2Panner.pan.setValueAtTime(1, audioContext.currentTime);\n  // connections\n  oscillator2.connect(oscillator2Gain);\n  oscillator2Gain.connect(oscillator2Visualizer);\n  oscillator2Visualizer.connect(oscillator2Panner);\n  oscillator2.start();\n\n\n  /*\n   * Pink Noise + filter, gain\n   */\n  const bufferSize = 4096;\n  const pinkNoise = (function() {\n      var b0, b1, b2, b3, b4, b5, b6;\n      b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n      const node = audioContext.createScriptProcessor(bufferSize, 1, 1);\n      node.onaudioprocess = function(e) {\n          const output = e.outputBuffer.getChannelData(0);\n          for (let i = 0; i < bufferSize; i++) {\n              const white = Math.random() * 2 - 1;\n              b0 = 0.99886 * b0 + white * 0.0555179;\n              b1 = 0.99332 * b1 + white * 0.0750759;\n              b2 = 0.96900 * b2 + white * 0.1538520;\n              b3 = 0.86650 * b3 + white * 0.3104856;\n              b4 = 0.55000 * b4 + white * 0.5329522;\n              b5 = -0.7616 * b5 - white * 0.0168980;\n              output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n              output[i] *= 0.11; // (roughly) compensate for gain\n              b6 = white * 0.115926;\n          }\n      }\n      return node;\n  })();\n  const pinkNoiseFilter = audioContext.createBiquadFilter();\n  const pinkNoiseVolume =  audioContext.createGain();\n  pinkNoise.connect(pinkNoiseFilter);\n  pinkNoiseFilter.connect(pinkNoiseVolume);\n  pinkNoiseFilter.type = 'lowpass';\n  pinkNoiseFilter.frequency.value = 5000;\n  pinkNoiseFilter.Q.value = 0;\n  pinkNoiseVolume.gain.value = 0.01;\n\n\n  /*\n   * Master Volume Gain Node, connections\n   */\n  const masterVolume = audioContext.createGain();\n  masterVolume.gain.value = 0;\n  oscillator1.detune.setValueAtTime(-19, audioContext.currentTime); // value in cents\n  oscillator1Panner.connect(masterVolume);\n  oscillator2Panner.connect(masterVolume);\n  pinkNoiseVolume.connect(masterVolume);\n\n  // masterVolume.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 2);\n\n\n  /*\n   * Visualizer, animation\n   */\n  const visualizer = audioContext.createAnalyser();\n  masterVolume.connect(visualizer);\n  visualizer.connect(audioContext.destination);\n\n  /*\n   * Listen for incoming actions that affect audio nodes\n   */\n  const oscillators = [\n    oscillator1,\n    oscillator2,\n    pinkNoiseVolume,\n    pinkNoiseFilter,\n    oscillator1Gain,\n    oscillator2Gain\n  ];\n  yield put({type: '@action.initializeApp'});\n  yield put({type: '@action.createVisualizer', payload: visualizer});\n  yield put({type: '@action.createOsc1Visualizer', payload: oscillator1Visualizer});\n  yield put({type: '@action.createOsc2Visualizer', payload: oscillator2Visualizer});\n  yield takeEvery('@action.mixer.setMasterVolume', setMasterVolume, masterVolume, audioContext);\n  yield takeEvery('@action.setOscillatorParameter', setOscillatorParameter, oscillators);\n}\n\nfunction* watchForUserPermissionForAudio() {\n  yield takeEvery('@action.grantUserPermissionForAudio', initializeAudioSaga);\n}\n\nexport default function* rootSaga() {\n  yield all([\n    watchForUserPermissionForAudio(),\n  ])\n}","import { action, createStore } from 'easy-peasy';\nimport createSagaMiddleware from 'redux-saga'\nimport rootSaga from 'sagas/rootSaga';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst middleware = [sagaMiddleware];\n\nconst model = {\n  appIsInitialized: false,\n  initializeApp: action(state => {\n    state.appIsInitialized = true;\n  }),\n\n  transport: {\n    isPlaying: false,\n    isPaused: true,\n    isStopped: true,\n\n    play: action(state => {\n      state.isPlaying = true;\n      state.isPaused = false;\n      state.isStopped = false;\n    }),\n    pause: action(state => {\n      state.isPlaying = false;\n      state.isPaused = true;\n      state.isStopped = false;\n    }),\n    stop: action(state => {\n      state.isPlaying = false;\n      state.isPaused = true;\n      state.isStopped = true;\n    }),\n  },\n\n  mixer: {\n    // Master volume\n    masterVolume: 0, // between 0 and 1\n    setMasterVolume: action((state, payload) => {\n      state.masterVolume = payload;\n    })\n  },\n\n  oscillators: [\n    {\n      frequency: 72,\n      detune: -19,\n    },\n    {\n      frequency: 71.6,\n      detune: 0,\n    },\n    {\n      gain: 0.01,\n    },\n    {\n      frequency: 5000,\n      Q: 0,\n    },\n    {\n      gain: 0.5,\n    },\n    {\n      gain: 0.5,\n    }\n  ],\n  setOscillatorParameter: action((state, payload) => {\n    const { oscillatorIndex, parameter, value } = payload;\n    state.oscillators[oscillatorIndex][parameter] = value;\n  }),\n\n  // THIS IS ALL UGLY AND TERRIBLE\n  // FIND A BETTER WAY HOMIE\n  visualizer: null, // this is probably a bad idea.  Going to see if it works.\n  createVisualizer: action((state, payload) => {\n    state.visualizer = payload;\n  }),\n  oscillator1Visualizer: null, // this is probably a bad idea.  Going to see if it works.\n  createOsc1Visualizer: action((state, payload) => {\n    state.oscillator1Visualizer = payload;\n  }),\n  oscillator2Visualizer: null, // this is probably a bad idea.  Going to see if it works.\n  createOsc2Visualizer: action((state, payload) => {\n    state.oscillator2Visualizer = payload;\n  }),\n\n  // In order to do anything with an AudioContext,\n  // we first need user permission. [Web Audio API]\n  hasUserPermissionForAudio: false,\n  grantUserPermissionForAudio: action(state => {\n    state.hasUserPermissionForAudio = true;\n  }),\n\n\n  theme: 'light',\n  toggleTheme: action((state) => {\n    state.theme = (state.theme === 'light' ? 'dark' : 'light');\n  }),\n\n  errors: [\"Must get permission to use AudioContext.\"],\n\n  createError: action((state, payload) => {\n    state.errors = [...state.errors, payload];\n  }),\n};\n\n// Create the store\nconst store = createStore(model, { middleware });\n// Start the saga middleware\nsagaMiddleware.run(rootSaga);\n// Export the store.\nexport default store;","import styled from '@emotion/styled';\n\nconst Button = styled.button`\n  font-size: 2rem;\n  font-family: \"Roboto Mono\";\n  font-weight: 400;\n  font-style: normal;\n`;\n\nexport default Button;","import styled from '@emotion/styled';\n\nexport const ControlsWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  margin: 20px;\n  padding: 20px;\n`;\n\nexport const ControlGroup = styled.div`\n  margin-right: 100px;\n`;\n\nexport const ControlLabel = styled.label`\n  display: block;\n  text-align: center;\n`;\n\nexport const Controls = styled.div`\n  display: flex;\n  flex-direction: row;\n`;","import React, { useEffect, useRef } from 'react';\nimport { useStoreActions, useStoreState } from 'easy-peasy';\nimport { Button, OscillatorParameterRange, VerticalRange } from 'Components';\nimport { ControlGroup, ControlLabel, Controls, ControlsWrapper } from './Styled';\n\n\n/*\n * This stuff is all for canvas pixel ratio.\n */\nconst getPixelRatio = context => {\n  var backingStore =\n    context.backingStorePixelRatio ||\n    context.webkitBackingStorePixelRatio ||\n    context.mozBackingStorePixelRatio ||\n    context.msBackingStorePixelRatio ||\n    context.oBackingStorePixelRatio ||\n    context.backingStorePixelRatio ||\n    1;\n\n  return (window.devicePixelRatio || 1) / backingStore;\n};\n\nconst useVisualizer = (canvasRef, visualizer) => (\n  () => {\n    if (!canvasRef || !canvasRef.current) return;\n    let canvas = canvasRef.current;\n    let context = canvas.getContext('2d');\n    let ratio = getPixelRatio(context);\n    let width = getComputedStyle(canvas).getPropertyValue('width').slice(0, -2);\n    let height = getComputedStyle(canvas).getPropertyValue('height').slice(0, -2);\n\n    canvas.width = width * ratio;\n    canvas.height = height * ratio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n\n    /*\n    * Main canvas rendering function\n    */\n    let requestId;\n    const render = () => {\n      var bufferLength = visualizer.frequencyBinCount;\n      var dataArray = new Uint8Array(bufferLength);\n      visualizer.getByteTimeDomainData(dataArray);\n      context.fillStyle = \"rgb(200, 200, 200)\";\n      context.fillRect(0, 0, canvas.width, canvas.height);\n      context.lineWidth = 2;\n      context.strokeStyle = \"rgb(0, 0, 0)\";\n      context.beginPath();\n      var sliceWidth = canvas.width * 1.0 / bufferLength;\n      var x = 0;\n      for (var i = 0; i < bufferLength; i++) {\n        var v = dataArray[i] / 128.0;\n        var y = v * canvas.height / 2;\n        if (i === 0) { context.moveTo(x, y); }\n        else { context.lineTo(x, y); }\n        x += sliceWidth;\n      }\n      context.lineTo(canvas.width, canvas.height / 2);\n      context.stroke();\n      requestId = requestAnimationFrame(render);\n    }\n    render();\n    return () => { cancelAnimationFrame(requestId); }\n  }\n);\n\nfunction Layout() {\n\n  const visualizer = useStoreState(state => state.visualizer);\n  const oscillator1Visualizer = useStoreState(state => state.oscillator1Visualizer);\n  const oscillator2Visualizer = useStoreState(state => state.oscillator2Visualizer);\n  console.log('visualizer is', visualizer);\n\n  /*\n   * Canvas experiment\n   */\n  let canvasRef = useRef();\n  let osc1Ref = useRef();\n  let osc2Ref = useRef();\n  useEffect(useVisualizer(canvasRef, visualizer));\n  useEffect(useVisualizer(osc1Ref, oscillator1Visualizer));\n  useEffect(useVisualizer(osc2Ref, oscillator2Visualizer));\n\n  const mixer = {\n    ...useStoreState(state => state.mixer),\n    ...useStoreActions(actions => actions.mixer),\n  };\n\n  const hasUserPermissionForAudio = useStoreState(state => state.hasUserPermissionForAudio);\n  const grantUserPermissionForAudio = useStoreActions(\n    actions => actions.grantUserPermissionForAudio\n  );\n\n  if (!hasUserPermissionForAudio) {\n    return (\n      <Button\n        onClick={() => grantUserPermissionForAudio()}\n      >\n        Grant permission for audio\n      </Button>\n    );\n  }\n\n  return (\n    <div>\n      <ControlsWrapper>\n\n        <ControlGroup>\n          <ControlLabel>left oscillator</ControlLabel>\n          <Controls>\n            <OscillatorParameterRange\n              oscillatorIndex={0}\n              parameter=\"frequency\"\n              step={0.001}\n              min={20}\n              max={300}\n            />\n            <OscillatorParameterRange\n              oscillatorIndex={0}\n              parameter=\"detune\"\n              step={0.001}\n              min={-50}\n              max={50}\n            />\n            <OscillatorParameterRange\n              oscillatorIndex={4}\n              parameter=\"gain\"\n              step={0.001}\n              min={0}\n              max={0.5}\n            />\n          </Controls>\n        </ControlGroup>\n\n        <ControlGroup>\n          <ControlLabel>right oscillator</ControlLabel>\n          <Controls>\n            <OscillatorParameterRange\n              oscillatorIndex={1}\n              parameter=\"frequency\"\n              step={0.001}\n              min={20}\n              max={300}\n            />\n            <OscillatorParameterRange\n              oscillatorIndex={1}\n              parameter=\"detune\"\n              step={0.001}\n              min={-50}\n              max={50}\n            />\n            <OscillatorParameterRange\n              oscillatorIndex={5}\n              parameter=\"gain\"\n              step={0.001}\n              min={0}\n              max={0.5}\n            />\n          </Controls>\n        </ControlGroup>\n\n        <ControlGroup>\n          <ControlLabel>pink noise</ControlLabel>\n          <Controls>\n            <OscillatorParameterRange\n              oscillatorIndex={3}\n              parameter=\"frequency\"\n              step={0.001}\n              min={1}\n              max={10000}\n            />\n            <OscillatorParameterRange\n              oscillatorIndex={3}\n              parameter=\"Q\"\n              step={0.001}\n              min={0}\n              max={15}\n            />\n            <OscillatorParameterRange\n              oscillatorIndex={2}\n              parameter=\"gain\"\n              step={0.001}\n              min={0}\n              max={0.25}\n            />\n          </Controls>\n        </ControlGroup>\n\n        <VerticalRange\n          name=\"master volume\"\n          step={0.0001}\n          min={0}\n          max={1}\n          values={[mixer.masterVolume]}\n          onChange={([value]) => mixer.setMasterVolume(value)}\n        />\n      </ControlsWrapper>\n      <canvas\n        ref={osc1Ref}\n        style={{ width: '500px', height: '500px' }}\n      />\n      <canvas\n        ref={osc2Ref}\n        style={{ width: '500px', height: '500px' }}\n      />\n      <canvas\n        ref={canvasRef}\n        id=\"visualizer\"\n        style={{ width: '500px', height: '500px' }}\n      />\n    </div>\n  );\n}\n\nexport default Layout;\n","import React from 'react';\nimport { Direction, Range, getTrackBackground } from 'react-range';\n\nfunction VerticalRange({ parameter, step, min, max, values, onChange }) {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', margin: '20px'}}>\n      <Range\n        step={step}\n        min={min}\n        max={max}\n        direction={Direction.Up}\n        values={values}\n        onChange={onChange}\n        renderTrack={({ props, children }) => (\n          <div\n            onMouseDown={props.onMouseDown}\n            onTouchStart={props.onTouchStart}\n            style={{\n              ...props.style,\n              flexGrow: 1,\n              width: '36px',\n              display: 'flex',\n              justifyContent: 'center',\n              height: '300px'\n            }}\n          >\n            <div\n              ref={props.ref}\n              style={{\n                width: '5px',\n                height: '100%',\n                borderRadius: '4px',\n                background: getTrackBackground({\n                  colors: ['#548BF4', '#ccc'],\n                  values,\n                  min,\n                  max,\n                  direction: Direction.Up\n                }),\n                alignSelf: 'center'\n              }}\n            >\n              {children}\n            </div>\n          </div>\n        )}\n        renderThumb={({ props, isDragged }) => (\n          <div\n            {...props}\n            style={{\n              ...props.style,\n              height: '42px',\n              width: '42px',\n              borderRadius: '4px',\n              backgroundColor: '#FFF',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              boxShadow: '0px 2px 6px #AAA'\n            }}\n          >\n            <div\n              style={{\n                width: '16px',\n                height: '5px',\n                backgroundColor: isDragged ? '#548BF4' : '#CCC'\n              }}\n            />\n          </div>\n        )}\n      />\n      <label>{parameter}<br />{values[0]}</label>\n    </div>\n  );\n}\n\nexport default VerticalRange;","import React from 'react';\nimport { useStoreActions, useStoreState } from 'easy-peasy';\nimport { VerticalRange } from 'Components';\n\nfunction OscillatorParameterRange({\n  oscillatorIndex,\n  parameter,\n  step,\n  min,\n  max\n}) {\n  const oscillatorProps = { parameter, step, min, max };\n  const oscillators = useStoreState(state => state.oscillators);\n  const setOscillatorParameter = useStoreActions(actions => actions.setOscillatorParameter)\n  return (\n    <VerticalRange\n      {...oscillatorProps}\n      values={[oscillators[oscillatorIndex][parameter]]}\n      onChange={([value]) => setOscillatorParameter({\n        oscillatorIndex,\n        parameter,\n        value\n      })}\n    />\n  );\n}\n\nexport default OscillatorParameterRange;\n","import React from 'react';\nimport { StoreProvider } from 'easy-peasy';\nimport store from './store';\nimport { Layout } from 'Components';\n\nfunction App() {\n  return (\n    <StoreProvider store={store}>\n      <Layout />\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}