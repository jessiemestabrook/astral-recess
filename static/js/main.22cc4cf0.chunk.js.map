{"version":3,"sources":["sagas/rootSaga.js","store.js","Components/Button.js","Components/Layout.js","Components/VerticalRange.js","App.js","serviceWorker.js","index.js"],"names":["setMasterVolume","setOscillatorParameter","initializeAudioSaga","watchForUserPermissionForAudio","rootSaga","doSetMasterVolume","masterVolume","audioContext","value","console","log","currentTime","gain","linearRampToValueAtTime","payload","call","oscillators","oscillatorIndex","parameter","AudioContext","window","webkitAudioContext","oscillator1","createOscillator","type","frequency","panner1","createStereoPanner","pan","setValueAtTime","connect","oscillator2","panner2","pinkNoise","b0","b1","b2","b3","b4","b5","b6","node","createScriptProcessor","onaudioprocess","e","output","outputBuffer","getChannelData","i","white","Math","random","pinkNoiseFilter","createBiquadFilter","pinkNoiseVolume","createGain","Q","detune","start","visualizer","createAnalyser","destination","put","takeEvery","all","sagaMiddleware","createSagaMiddleware","middleware","model","appIsInitialized","initializeApp","action","state","transport","isPlaying","isPaused","isStopped","play","pause","stop","mixer","tracks","createTrack","volume","panning","setTrackVolume","trackIndex","setTrackPanning","hasUserPermissionForAudio","grantUserPermissionForAudio","theme","toggleTheme","errors","createError","store","createStore","run","Button","styled","button","Layout","useStoreState","useStoreActions","actions","style","display","flexDirection","margin","padding","marginRight","textAlign","name","step","min","max","values","onChange","onClick","VerticalRange","alignItems","direction","Direction","Up","renderTrack","props","children","onMouseDown","onTouchStart","flexGrow","width","justifyContent","height","ref","borderRadius","background","getTrackBackground","colors","alignSelf","renderThumb","isDragged","backgroundColor","boxShadow","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.22cc4cf0.chunk.js","sourcesContent":["import { call, delay, put, takeEvery, all } from 'redux-saga/effects'\n\nfunction doSetMasterVolume(masterVolume, audioContext, value) {\n  console.log('doSetMasterVolume');\n  console.log('audioContext.currentTime is', audioContext.currentTime);\n  masterVolume.gain.linearRampToValueAtTime(value, audioContext.currentTime + 0.1);\n}\n\nfunction* setMasterVolume(masterVolume, audioContext, { payload }) {\n  yield call(doSetMasterVolume, masterVolume, audioContext, payload);\n}\n\nfunction* setOscillatorParameter(oscillators, { payload }) {\n  const { oscillatorIndex, parameter, value } = payload;\n  oscillators[oscillatorIndex][parameter].value = value;\n}\n\nfunction* initializeAudioSaga() {\n\n  // create audio context\n  const AudioContext = window.AudioContext || window.webkitAudioContext;\n  const audioContext = new AudioContext();\n\n\n  const oscillator1 = audioContext.createOscillator();\n  oscillator1.type = 'sine';\n  oscillator1.frequency.value = 72; // value in hertz\n  const panner1 = audioContext.createStereoPanner();\n  panner1.pan.setValueAtTime(-1, audioContext.currentTime);\n  oscillator1.connect(panner1);\n\n\n  const oscillator2 = audioContext.createOscillator();\n  oscillator2.type = 'sine';\n  oscillator2.frequency.value = 71.6; // value in hertz\n  const panner2 = audioContext.createStereoPanner();\n  panner2.pan.setValueAtTime(1, audioContext.currentTime);\n  oscillator2.connect(panner2);\n\n  // white noise\n  // const bufferSize = 2 * audioContext.sampleRate;\n  // const noiseBuffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);\n  // const output = noiseBuffer.getChannelData(0);\n  // for (let i = 0; i < bufferSize; i++) {\n  //     output[i] = Math.random() * 2 - 1;\n  // }\n\n  // const whiteNoise = audioContext.createBufferSource();\n  // whiteNoise.buffer = noiseBuffer;\n  // whiteNoise.loop = true;\n\n\n  // pink noise\n  const bufferSize = 4096;\n  const pinkNoise = (function() {\n      var b0, b1, b2, b3, b4, b5, b6;\n      b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n      const node = audioContext.createScriptProcessor(bufferSize, 1, 1);\n      node.onaudioprocess = function(e) {\n          const output = e.outputBuffer.getChannelData(0);\n          for (let i = 0; i < bufferSize; i++) {\n              const white = Math.random() * 2 - 1;\n              b0 = 0.99886 * b0 + white * 0.0555179;\n              b1 = 0.99332 * b1 + white * 0.0750759;\n              b2 = 0.96900 * b2 + white * 0.1538520;\n              b3 = 0.86650 * b3 + white * 0.3104856;\n              b4 = 0.55000 * b4 + white * 0.5329522;\n              b5 = -0.7616 * b5 - white * 0.0168980;\n              output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n              output[i] *= 0.11; // (roughly) compensate for gain\n              b6 = white * 0.115926;\n          }\n      }\n      return node;\n  })();\n  const pinkNoiseFilter = audioContext.createBiquadFilter();\n  const pinkNoiseVolume =  audioContext.createGain();\n  pinkNoise.connect(pinkNoiseFilter);\n  pinkNoiseFilter.connect(pinkNoiseVolume);\n  pinkNoiseFilter.type = 'lowpass';\n  pinkNoiseFilter.frequency.value = 5000;\n  pinkNoiseFilter.Q.value = 0;\n  pinkNoiseVolume.gain.value = 0.01;\n\n\n\n\n  const masterVolume = audioContext.createGain();\n  masterVolume.gain.value = 0;\n  oscillator1.detune.setValueAtTime(-19, audioContext.currentTime); // value in cents\n  panner1.connect(masterVolume);\n  panner2.connect(masterVolume);\n  pinkNoiseVolume.connect(masterVolume);\n  // whiteNoise.connect(masterVolume);\n\n  // whiteNoise.start(0);\n  oscillator1.start();\n  oscillator2.start();\n  masterVolume.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 2);\n\n  const visualizer = audioContext.createAnalyser();\n  masterVolume.connect(visualizer);\n  visualizer.connect(audioContext.destination);\n\n  const oscillators = [oscillator1, oscillator2, pinkNoiseVolume, pinkNoiseFilter];\n  yield put({type: '@action.initializeApp'});\n  yield takeEvery('@action.mixer.setMasterVolume', setMasterVolume, masterVolume, audioContext);\n  yield takeEvery('@action.setOscillatorParameter', setOscillatorParameter, oscillators);\n}\n\nfunction* watchForUserPermissionForAudio() {\n  yield takeEvery('@action.grantUserPermissionForAudio', initializeAudioSaga);\n}\n\nexport default function* rootSaga() {\n  yield all([\n    watchForUserPermissionForAudio(),\n  ])\n}","import { action, createStore } from 'easy-peasy';\nimport createSagaMiddleware from 'redux-saga'\nimport rootSaga from 'sagas/rootSaga';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst middleware = [sagaMiddleware];\n\nconst model = {\n  appIsInitialized: false,\n  initializeApp: action(state => {\n    state.appIsInitialized = true;\n  }),\n\n  transport: {\n    isPlaying: false,\n    isPaused: true,\n    isStopped: true,\n\n    play: action(state => {\n      state.isPlaying = true;\n      state.isPaused = false;\n      state.isStopped = false;\n    }),\n    pause: action(state => {\n      state.isPlaying = false;\n      state.isPaused = true;\n      state.isStopped = false;\n    }),\n    stop: action(state => {\n      state.isPlaying = false;\n      state.isPaused = true;\n      state.isStopped = true;\n    }),\n  },\n\n  mixer: {\n    // tracks is an array of objects\n    // each track in the mixer gets a volume and panning\n    tracks: [],\n    createTrack: action(state => {\n      state.tracks = [...state.tracks, { volume: 0.5, panning: 0 }]\n    }),\n    setTrackVolume: action((state, payload) => {\n      const { trackIndex, volume } = payload;\n      state.tracks[trackIndex].volume = volume;\n    }),\n    setTrackPanning: action((state, payload) => {\n      const { trackIndex, panning } = payload;\n      state.tracks[trackIndex].panning = panning;\n    }),\n\n    // Master volume\n    masterVolume: 0.5, // between 0 and 1\n    setMasterVolume: action((state, payload) => {\n      state.masterVolume = payload;\n    })\n  },\n\n  oscillators: [\n    {\n      frequency: 72,\n      detune: -19,\n    },\n    {\n      frequency: 71.6,\n      detune: 0,\n    },\n    {\n      gain: 0.01,\n    },\n    {\n      frequency: 5000,\n      Q: 0,\n    }\n  ],\n  setOscillatorParameter: action((state, payload) => {\n    const { oscillatorIndex, parameter, value } = payload;\n    state.oscillators[oscillatorIndex][parameter] = value;\n  }),\n\n  // In order to do anything with an AudioContext,\n  // we first need user permission. [Web Audio API]\n  hasUserPermissionForAudio: false,\n  grantUserPermissionForAudio: action(state => {\n    state.hasUserPermissionForAudio = true;\n  }),\n\n\n  theme: 'light',\n  toggleTheme: action((state) => {\n    state.theme = (state.theme === 'light' ? 'dark' : 'light');\n  }),\n\n  errors: [\"Must get permission to use AudioContext.\"],\n\n  createError: action((state, payload) => {\n    state.errors = [...state.errors, payload];\n  }),\n};\n\n// Create the store\nconst store = createStore(model, { middleware });\n// Start the saga middleware\nsagaMiddleware.run(rootSaga);\n// Export the store.\nexport default store;","import styled from '@emotion/styled';\n\nconst Button = styled.button`\n  font-size: 2rem;\n  font-family: \"Roboto Mono\";\n  font-weight: 400;\n  font-style: normal;\n`;\n\nexport default Button;","import React from 'react';\nimport { useStoreActions, useStoreState } from 'easy-peasy';\nimport { Button, VerticalRange } from 'Components';\n\n\n\nfunction Layout() {\n  const transport = {\n    ...useStoreState(state => state.transport),\n    ...useStoreActions(actions => actions.transport),\n  };\n  const mixer = {\n    ...useStoreState(state => state.mixer),\n    ...useStoreActions(actions => actions.mixer),\n  };\n  const oscillators = useStoreState(state => state.oscillators);\n  const setOscillatorParameter = useStoreActions(actions => actions.setOscillatorParameter)\n\n  // example of using state and actions from easy-peasy\n  const theme = useStoreState(state => state.theme);\n  const toggleTheme = useStoreActions(actions => actions.toggleTheme);\n\n  const hasUserPermissionForAudio = useStoreState(state => state.hasUserPermissionForAudio);\n  const grantUserPermissionForAudio = useStoreActions(\n    actions => actions.grantUserPermissionForAudio\n  );\n\n  if (!hasUserPermissionForAudio) {\n    return (\n      <Button\n        onClick={() => grantUserPermissionForAudio()}\n      >\n        Grant permission for audio\n      </Button>\n    );\n  }\n\n  return (\n    <div>\n      {/* <Button\n        theme={theme}\n        onClick={() => {\n          toggleTheme();\n        }}\n      >\n        This is the {theme} theme\n      </Button>\n\n      <Button onClick={() => mixer.createTrack()}>\n        Create Track\n      </Button>\n      <Button\n        disabled={transport.isPlaying}\n        onClick={() => transport.play()}\n      >\n        play\n      </Button>\n      <Button\n        disabled={transport.isPaused}\n        onClick={() => transport.pause()}\n      >\n        pause\n      </Button>\n      <Button\n        disabled={transport.isStopped}\n        onClick={() => transport.stop()}\n      >\n        stop\n      </Button> */}\n      <div style={{ display: 'flex', flexDirection: 'row', margin: '20px', padding: '20px'}}>\n        {/* oscillator frequencies */}\n        <div style={{ marginRight: '100px' }}>\n          <label style={{ display: 'block', textAlign: 'center' }}>left oscillator</label>\n          <div style={{ display: 'flex', flexDirection: 'row'}}>\n            <VerticalRange\n              name=\"frequency\"\n              step={0.001}\n              min={20}\n              max={300}\n              values={[oscillators[0].frequency]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 0,\n                parameter: 'frequency',\n                value\n              })}\n            />\n            <VerticalRange\n              name=\"detune\"\n              step={0.001}\n              min={-50}\n              max={50}\n              values={[oscillators[0].detune]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 0,\n                parameter: 'detune',\n                value\n              })}\n            />\n          </div>\n        </div>\n\n        <div style={{ marginRight: '100px'}}>\n          <label style={{ display: 'block', textAlign: 'center' }}>right oscillator</label>\n          <div style={{ display: 'flex', flexDirection: 'row'}}>\n            <VerticalRange\n              name=\"frequency\"\n              step={0.001}\n              min={20}\n              max={300}\n              values={[oscillators[1].frequency]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 1,\n                parameter: 'frequency',\n                value\n              })}\n            />\n            <VerticalRange\n              name=\"detune\"\n              step={0.001}\n              min={-50}\n              max={50}\n              values={[oscillators[1].detune]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 1,\n                parameter: 'detune',\n                value\n              })}\n            />\n          </div>\n        </div>\n        <div style={{ marginRight: '100px'}}>\n          <label style={{ display: 'block', textAlign: 'center' }}>pink noise</label>\n          <div style={{ display: 'flex', flexDirection: 'row'}}>\n          <VerticalRange\n              name=\"filter freq\"\n              step={0.002}\n              min={1}\n              max={10000}\n              values={[oscillators[3].frequency]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 3,\n                parameter: 'frequency',\n                value\n              })}\n            />\n            <VerticalRange\n              name=\"filter q\"\n              step={0.001}\n              min={0}\n              max={15}\n              values={[oscillators[3].Q]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 3,\n                parameter: 'Q',\n                value\n              })}\n            />\n            <VerticalRange\n              name=\"volume\"\n              step={0.001}\n              min={0}\n              max={0.25}\n              values={[oscillators[2].gain]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 2,\n                parameter: 'gain',\n                value\n              })}\n            />\n            {/* <VerticalRange\n              name=\"detune\"\n              step={0.001}\n              min={-50}\n              max={50}\n              values={[oscillators[1].detune]}\n              onChange={([value]) => setOscillatorParameter({\n                oscillatorIndex: 1,\n                parameter: 'detune',\n                value\n              })}\n            /> */}\n          </div>\n        </div>\n        <VerticalRange\n          name=\"master volume\"\n          step={0.0001}\n          min={0}\n          max={1}\n          values={[mixer.masterVolume]}\n          onChange={([value]) => mixer.setMasterVolume(value)}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Layout;\n","import React from 'react';\nimport { Direction, Range, getTrackBackground } from 'react-range';\n\nfunction VerticalRange({ name, step, min, max, values, onChange }) {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', margin: '20px'}}>\n      <Range\n        step={step}\n        min={min}\n        max={max}\n        direction={Direction.Up}\n        values={values}\n        onChange={onChange}\n        renderTrack={({ props, children }) => (\n          <div\n            onMouseDown={props.onMouseDown}\n            onTouchStart={props.onTouchStart}\n            style={{\n              ...props.style,\n              flexGrow: 1,\n              width: '36px',\n              display: 'flex',\n              justifyContent: 'center',\n              height: '300px'\n            }}\n          >\n            <div\n              ref={props.ref}\n              style={{\n                width: '5px',\n                height: '100%',\n                borderRadius: '4px',\n                background: getTrackBackground({\n                  colors: ['#548BF4', '#ccc'],\n                  values,\n                  min,\n                  max,\n                  direction: Direction.Up\n                }),\n                alignSelf: 'center'\n              }}\n            >\n              {children}\n            </div>\n          </div>\n        )}\n        renderThumb={({ props, isDragged }) => (\n          <div\n            {...props}\n            style={{\n              ...props.style,\n              height: '42px',\n              width: '42px',\n              borderRadius: '4px',\n              backgroundColor: '#FFF',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              boxShadow: '0px 2px 6px #AAA'\n            }}\n          >\n            <div\n              style={{\n                width: '16px',\n                height: '5px',\n                backgroundColor: isDragged ? '#548BF4' : '#CCC'\n              }}\n            />\n          </div>\n        )}\n      />\n      <label>{name}<br />{values[0]}</label>\n    </div>\n  );\n}\n\nexport default VerticalRange;","import React from 'react';\nimport { StoreProvider } from 'easy-peasy';\nimport store from './store';\nimport { Layout } from 'Components';\n\nfunction App() {\n  return (\n    <StoreProvider store={store}>\n      <Layout />\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}