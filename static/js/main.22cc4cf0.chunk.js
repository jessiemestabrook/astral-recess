(this["webpackJsonpastral-recess"]=this["webpackJsonpastral-recess"]||[]).push([[0],{30:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(22),o=n.n(c),i=n(4),l=n(19),s=n(29),u=n(5),m=n.n(u),d=n(8),p=m.a.mark(h),f=m.a.mark(y),v=m.a.mark(O),b=m.a.mark(j),x=m.a.mark(w);function g(e,t,n){console.log("doSetMasterVolume"),console.log("audioContext.currentTime is",t.currentTime),e.gain.linearRampToValueAtTime(n,t.currentTime+.1)}function h(e,t,n){var a;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.payload,r.next=3,Object(d.b)(g,e,t,a);case 3:case"end":return r.stop()}}),p)}function y(e,t){var n,a,r,c;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=t.payload,a=n.oscillatorIndex,r=n.parameter,c=n.value,e[a][r].value=c;case 3:case"end":return o.stop()}}),f)}function O(){var e,t,n,a,r,c,o,i,l,s,u,p;return m.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return e=window.AudioContext||window.webkitAudioContext,t=new e,(n=t.createOscillator()).type="sine",n.frequency.value=72,(a=t.createStereoPanner()).pan.setValueAtTime(-1,t.currentTime),n.connect(a),(r=t.createOscillator()).type="sine",r.frequency.value=71.6,(c=t.createStereoPanner()).pan.setValueAtTime(1,t.currentTime),r.connect(c),4096,o=function(){var e,n,a,r,c,o,i;e=n=a=r=c=o=i=0;var l=t.createScriptProcessor(4096,1,1);return l.onaudioprocess=function(t){for(var l=t.outputBuffer.getChannelData(0),s=0;s<4096;s++){var u=2*Math.random()-1;e=.99886*e+.0555179*u,n=.99332*n+.0750759*u,a=.969*a+.153852*u,r=.8665*r+.3104856*u,c=.55*c+.5329522*u,o=-.7616*o-.016898*u,l[s]=e+n+a+r+c+o+i+.5362*u,l[s]*=.11,i=.115926*u}},l}(),i=t.createBiquadFilter(),l=t.createGain(),o.connect(i),i.connect(l),i.type="lowpass",i.frequency.value=5e3,i.Q.value=0,l.gain.value=.01,(s=t.createGain()).gain.value=0,n.detune.setValueAtTime(-19,t.currentTime),a.connect(s),c.connect(s),l.connect(s),n.start(),r.start(),s.gain.linearRampToValueAtTime(.5,t.currentTime+2),u=t.createAnalyser(),s.connect(u),u.connect(t.destination),p=[n,r,l,i],m.next=39,Object(d.c)({type:"@action.initializeApp"});case 39:return m.next=41,Object(d.d)("@action.mixer.setMasterVolume",h,s,t);case 41:return m.next=43,Object(d.d)("@action.setOscillatorParameter",y,p);case 43:case"end":return m.stop()}}),v)}function j(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)("@action.grantUserPermissionForAudio",O);case 2:case"end":return e.stop()}}),b)}function w(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)([j()]);case 2:case"end":return e.stop()}}),x)}var E=Object(s.a)(),k=[E],T={appIsInitialized:!1,initializeApp:Object(i.b)((function(e){e.appIsInitialized=!0})),transport:{isPlaying:!1,isPaused:!0,isStopped:!0,play:Object(i.b)((function(e){e.isPlaying=!0,e.isPaused=!1,e.isStopped=!1})),pause:Object(i.b)((function(e){e.isPlaying=!1,e.isPaused=!0,e.isStopped=!1})),stop:Object(i.b)((function(e){e.isPlaying=!1,e.isPaused=!0,e.isStopped=!0}))},mixer:{tracks:[],createTrack:Object(i.b)((function(e){e.tracks=[].concat(Object(l.a)(e.tracks),[{volume:.5,panning:0}])})),setTrackVolume:Object(i.b)((function(e,t){var n=t.trackIndex,a=t.volume;e.tracks[n].volume=a})),setTrackPanning:Object(i.b)((function(e,t){var n=t.trackIndex,a=t.panning;e.tracks[n].panning=a})),masterVolume:.5,setMasterVolume:Object(i.b)((function(e,t){e.masterVolume=t}))},oscillators:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0}],setOscillatorParameter:Object(i.b)((function(e,t){var n=t.oscillatorIndex,a=t.parameter,r=t.value;e.oscillators[n][a]=r})),hasUserPermissionForAudio:!1,grantUserPermissionForAudio:Object(i.b)((function(e){e.hasUserPermissionForAudio=!0})),theme:"light",toggleTheme:Object(i.b)((function(e){e.theme="light"===e.theme?"dark":"light"})),errors:["Must get permission to use AudioContext."],createError:Object(i.b)((function(e,t){e.errors=[].concat(Object(l.a)(e.errors),[t])}))},A=Object(i.c)(T,{middleware:k});E.run(w);var C=A,P=n(25);function I(){var e=Object(P.a)(['\n  font-size: 2rem;\n  font-family: "Roboto Mono";\n  font-weight: 400;\n  font-style: normal;\n']);return I=function(){return e},e}var q=n(28).a.button(I()),S=n(7),V=n(11);var F=function(){Object(V.a)({},Object(i.e)((function(e){return e.transport})),{},Object(i.d)((function(e){return e.transport})));var e=Object(V.a)({},Object(i.e)((function(e){return e.mixer})),{},Object(i.d)((function(e){return e.mixer}))),t=Object(i.e)((function(e){return e.oscillators})),n=Object(i.d)((function(e){return e.setOscillatorParameter})),a=(Object(i.e)((function(e){return e.theme})),Object(i.d)((function(e){return e.toggleTheme})),Object(i.e)((function(e){return e.hasUserPermissionForAudio}))),c=Object(i.d)((function(e){return e.grantUserPermissionForAudio}));return a?r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:"20px",padding:"20px"}},r.a.createElement("div",{style:{marginRight:"100px"}},r.a.createElement("label",{style:{display:"block",textAlign:"center"}},"left oscillator"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(M,{name:"frequency",step:.001,min:20,max:300,values:[t[0].frequency],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:0,parameter:"frequency",value:t})}}),r.a.createElement(M,{name:"detune",step:.001,min:-50,max:50,values:[t[0].detune],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:0,parameter:"detune",value:t})}}))),r.a.createElement("div",{style:{marginRight:"100px"}},r.a.createElement("label",{style:{display:"block",textAlign:"center"}},"right oscillator"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(M,{name:"frequency",step:.001,min:20,max:300,values:[t[1].frequency],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:1,parameter:"frequency",value:t})}}),r.a.createElement(M,{name:"detune",step:.001,min:-50,max:50,values:[t[1].detune],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:1,parameter:"detune",value:t})}}))),r.a.createElement("div",{style:{marginRight:"100px"}},r.a.createElement("label",{style:{display:"block",textAlign:"center"}},"pink noise"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(M,{name:"filter freq",step:.002,min:1,max:1e4,values:[t[3].frequency],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:3,parameter:"frequency",value:t})}}),r.a.createElement(M,{name:"filter q",step:.001,min:0,max:15,values:[t[3].Q],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:3,parameter:"Q",value:t})}}),r.a.createElement(M,{name:"volume",step:.001,min:0,max:.25,values:[t[2].gain],onChange:function(e){var t=Object(S.a)(e,1)[0];return n({oscillatorIndex:2,parameter:"gain",value:t})}}))),r.a.createElement(M,{name:"master volume",step:1e-4,min:0,max:1,values:[e.masterVolume],onChange:function(t){var n=Object(S.a)(t,1)[0];return e.setMasterVolume(n)}}))):r.a.createElement(q,{onClick:function(){return c()}},"Grant permission for audio")},D=n(13);var M=function(e){var t=e.name,n=e.step,a=e.min,c=e.max,o=e.values,i=e.onChange;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px"}},r.a.createElement(D.Range,{step:n,min:a,max:c,direction:D.Direction.Up,values:o,onChange:i,renderTrack:function(e){var t=e.props,n=e.children;return r.a.createElement("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(V.a)({},t.style,{flexGrow:1,width:"36px",display:"flex",justifyContent:"center",height:"300px"})},r.a.createElement("div",{ref:t.ref,style:{width:"5px",height:"100%",borderRadius:"4px",background:Object(D.getTrackBackground)({colors:["#548BF4","#ccc"],values:o,min:a,max:c,direction:D.Direction.Up}),alignSelf:"center"}},n))},renderThumb:function(e){var t=e.props,n=e.isDragged;return r.a.createElement("div",Object.assign({},t,{style:Object(V.a)({},t.style,{height:"42px",width:"42px",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA"})}),r.a.createElement("div",{style:{width:"16px",height:"5px",backgroundColor:n?"#548BF4":"#CCC"}}))}}),r.a.createElement("label",null,t,r.a.createElement("br",null),o[0]))};var R=function(){return r.a.createElement(i.a,{store:C},r.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(40);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.22cc4cf0.chunk.js.map