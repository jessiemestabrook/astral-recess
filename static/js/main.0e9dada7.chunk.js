(this["webpackJsonpastral-recess"]=this["webpackJsonpastral-recess"]||[]).push([[0],{30:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(22),c=n.n(o),i=n(4),s=n(19),l=n(29),u=n(5),m=n.n(u),d=n(11),p=m.a.mark(x),f=m.a.mark(h),b=m.a.mark(y),g=m.a.mark(O),v=m.a.mark(j);function x(e,t,n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n.payload,console.log("masterVolume is",e),console.log("audioContext is",t),console.log("payload is",r),e.gain.linearRampToValueAtTime(r,t.currentTime+.2);case 5:case"end":return a.stop()}}),p)}function h(e,t){var n,r,a,o;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=t.payload,console.log("setOscillatorParameter"),console.log("oscillators is",e),console.log("payload is",n),r=n.oscillatorIndex,a=n.parameter,o=n.value,e[r][a].value=o;case 6:case"end":return c.stop()}}),f)}function y(){var e,t,n,r,a,o,c,i;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("initSaga()"),e=window.AudioContext||window.webkitAudioContext,t=new e,n=t.createOscillator(),(r=t.createStereoPanner()).pan.setValueAtTime(-1,t.currentTime),a=t.createOscillator(),(o=t.createStereoPanner()).pan.setValueAtTime(1,t.currentTime),(c=t.createGain()).gain.value=0,n.type="sine",a.type="sine",n.frequency.value=72,a.frequency.value=71.6,n.detune.setValueAtTime(-19,t.currentTime),n.connect(r),a.connect(o),r.connect(c),o.connect(c),c.connect(t.destination),n.start(),a.start(),c.gain.linearRampToValueAtTime(.5,t.currentTime+5),i=[n,a],s.next=27,Object(d.b)({type:"@action.initializeApp"});case 27:return s.next=29,Object(d.c)("@action.mixer.setMasterVolume",x,c,t);case 29:return s.next=31,Object(d.c)("@action.setOscillatorParameter",h,i);case 31:case"end":return s.stop()}}),b)}function O(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)("@action.grantUserPermissionForAudio",y);case 2:case"end":return e.stop()}}),g)}function j(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)([O()]);case 2:case"end":return e.stop()}}),v)}var w=Object(l.a)(),k=[w],E={appIsInitialized:!1,initializeApp:Object(i.b)((function(e){e.appIsInitialized=!0})),transport:{isPlaying:!1,isPaused:!0,isStopped:!0,play:Object(i.b)((function(e){e.isPlaying=!0,e.isPaused=!1,e.isStopped=!1})),pause:Object(i.b)((function(e){e.isPlaying=!1,e.isPaused=!0,e.isStopped=!1})),stop:Object(i.b)((function(e){e.isPlaying=!1,e.isPaused=!0,e.isStopped=!0}))},mixer:{tracks:[],createTrack:Object(i.b)((function(e){e.tracks=[].concat(Object(s.a)(e.tracks),[{volume:.5,panning:0}])})),setTrackVolume:Object(i.b)((function(e,t){var n=t.trackIndex,r=t.volume;e.tracks[n].volume=r})),setTrackPanning:Object(i.b)((function(e,t){var n=t.trackIndex,r=t.panning;e.tracks[n].panning=r})),masterVolume:.5,setMasterVolume:Object(i.b)((function(e,t){e.masterVolume=t}))},oscillators:[{frequency:72,detune:-19},{frequency:71.6,detune:0}],setOscillatorParameter:Object(i.b)((function(e,t){var n=t.oscillatorIndex,r=t.parameter,a=t.value;e.oscillators[n][r]=a})),hasUserPermissionForAudio:!1,grantUserPermissionForAudio:Object(i.b)((function(e){e.hasUserPermissionForAudio=!0})),theme:"light",toggleTheme:Object(i.b)((function(e){e.theme="light"===e.theme?"dark":"light"})),errors:["Must get permission to use AudioContext."],createError:Object(i.b)((function(e,t){e.errors=[].concat(Object(s.a)(e.errors),[t])}))},T=Object(i.c)(E,{middleware:k});w.run(j);var A=T;var P=n(25);function C(){var e=Object(P.a)(['\n  font-size: 2rem;\n  font-family: "Roboto Mono";\n  font-weight: 400;\n  font-style: normal;\n']);return C=function(){return e},e}var I=n(28).a.button(C()),V=n(10),S=n(9);var F=function(){Object(S.a)({},Object(i.e)((function(e){return e.transport})),{},Object(i.d)((function(e){return e.transport})));var e=Object(S.a)({},Object(i.e)((function(e){return e.mixer})),{},Object(i.d)((function(e){return e.mixer}))),t=Object(i.e)((function(e){return e.oscillators})),n=Object(i.d)((function(e){return e.setOscillatorParameter})),r=(Object(i.e)((function(e){return e.theme})),Object(i.d)((function(e){return e.toggleTheme})),Object(i.e)((function(e){return e.hasUserPermissionForAudio}))),o=Object(i.d)((function(e){return e.grantUserPermissionForAudio}));return r?a.a.createElement("div",null,a.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:"20px",padding:"20px"}},a.a.createElement("div",{style:{marginRight:"100px"}},a.a.createElement("label",{style:{display:"block",textAlign:"center"}},"left oscillator"),a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.a.createElement(D,{name:"frequency",step:.001,min:40,max:200,values:[t[0].frequency],onChange:function(e){var t=Object(V.a)(e,1)[0];return n({oscillatorIndex:0,parameter:"frequency",value:t})}}),a.a.createElement(D,{name:"detune",step:.001,min:-50,max:50,values:[t[0].detune],onChange:function(e){var t=Object(V.a)(e,1)[0];return n({oscillatorIndex:0,parameter:"detune",value:t})}}))),a.a.createElement("div",{style:{marginRight:"100px"}},a.a.createElement("label",{style:{display:"block",textAlign:"center"}},"right oscillator"),a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.a.createElement(D,{name:"frequency",step:.001,min:40,max:200,values:[t[1].frequency],onChange:function(e){var t=Object(V.a)(e,1)[0];return n({oscillatorIndex:1,parameter:"frequency",value:t})}}),a.a.createElement(D,{name:"detune",step:.001,min:-50,max:50,values:[t[1].detune],onChange:function(e){var t=Object(V.a)(e,1)[0];return n({oscillatorIndex:1,parameter:"detune",value:t})}}))),a.a.createElement(D,{name:"master volume",step:1e-4,min:0,max:1,values:[e.masterVolume],onChange:function(t){var n=Object(V.a)(t,1)[0];return e.setMasterVolume(n)}}))):a.a.createElement(I,{onClick:function(){return o()}},"Grant permission for audio")},q=n(13);var D=function(e){var t=e.name,n=e.step,r=e.min,o=e.max,c=e.values,i=e.onChange;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px"}},a.a.createElement(q.Range,{step:n,min:r,max:o,direction:q.Direction.Up,values:c,onChange:i,renderTrack:function(e){var t=e.props,n=e.children;return a.a.createElement("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(S.a)({},t.style,{flexGrow:1,width:"36px",display:"flex",justifyContent:"center",height:"300px"})},a.a.createElement("div",{ref:t.ref,style:{width:"5px",height:"100%",borderRadius:"4px",background:Object(q.getTrackBackground)({colors:["#548BF4","#ccc"],values:c,min:r,max:o,direction:q.Direction.Up}),alignSelf:"center"}},n))},renderThumb:function(e){var t=e.props,n=e.isDragged;return a.a.createElement("div",Object.assign({},t,{style:Object(S.a)({},t.style,{height:"42px",width:"42px",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA"})}),a.a.createElement("div",{style:{width:"16px",height:"5px",backgroundColor:n?"#548BF4":"#CCC"}}))}}),a.a.createElement("label",null,t))};var M=function(){return a.a.createElement(i.a,{store:A},a.a.createElement(F,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(40);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.0e9dada7.chunk.js.map