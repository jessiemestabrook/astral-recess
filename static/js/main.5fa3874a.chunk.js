(this["webpackJsonpastral-recess"]=this["webpackJsonpastral-recess"]||[]).push([[0],{30:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(23),o=n.n(i),c=n(4),u=n(28),l=n(29),s=n(10),d=n.n(s),m=n(6),f=n(7),p=function(){var e=window.AudioContext||window.webkitAudioContext;if(!e)throw new Error("It appears that this browser does not support the Web Audio API.  Please switch to a modern browser.");var t=new e,n=t.createGain(),r=t.createAnalyser();return n.gain.value=0,n.connect(r),r.connect(t.destination),[t,n,r]},v=function(e,t,n){var r=n.payload;e.gain.linearRampToValueAtTime(r,t.currentTime+.1)},g=function(e,t){var n=t.payload,r=n.audioNodeIndex,a=n.parameter,i=n.value;e[r][a].value=i},x=function(e,t,n,r){var a=r.payload,i=a.mixer,o=a.audioNodes;t.gain.linearRampToValueAtTime(i.masterVolume,e.currentTime+4),n.forEach((function(t,n){o[n].frequency&&t.frequency.linearRampToValueAtTime(o[n].frequency,e.currentTime+4),o[n].detune&&t.detune.linearRampToValueAtTime(o[n].detune,e.currentTime+4),o[n].gain&&t.gain.linearRampToValueAtTime(o[n].gain,e.currentTime+4),o[n].Q&&t.Q.linearRampToValueAtTime(o[n].Q,e.currentTime+4)}))},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.type,a=void 0===r?"sine":r,i=n.frequency,o=void 0===i?200:i,c=n.detune,u=void 0===c?0:c,l=n.gain,s=void 0===l?.5:l,d=n.pan,m=void 0===d?0:d;if(!e||!e.createOscillator)throw new Error("Please provide an AudioContext.");var f=e.createOscillator(),p=e.createGain(),v=e.createAnalyser(),g=e.createStereoPanner();return f.type=a,f.frequency.value=o,f.detune.value=u,p.gain.value=s,g.pan.value=m,f.connect(p),p.connect(v),v.connect(g),f.start(),g.connect(t),[f,p,v,g]},h=function(e){var t,n,r,a,i,o,c;t=n=r=a=i=o=c=0;var u=e.createScriptProcessor(4096,1,1);return u.onaudioprocess=function(e){for(var u=e.outputBuffer.getChannelData(0),l=0;l<4096;l++){var s=2*Math.random()-1;t=.99886*t+.0555179*s,n=.99332*n+.0750759*s,r=.969*r+.153852*s,a=.8665*a+.3104856*s,i=.55*i+.5329522*s,o=-.7616*o-.016898*s,u[l]=t+n+r+a+i+o+c+.5362*s,u[l]*=.11,c=.115926*s}},u},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.filterType,a=void 0===r?"lowpass":r,i=n.filterFrequency,o=void 0===i?5e3:i,c=n.filterQ,u=void 0===c?0:c,l=n.gain,s=void 0===l?.01:l,d=h(e),m=e.createBiquadFilter(),f=e.createGain();return m.type=a,m.frequency.value=o,m.Q.value=u,f.gain.value=s,d.connect(m),m.connect(f),f.connect(t),[m,f]},O=d.a.mark(w),j=d.a.mark(q),E=d.a.mark(P);function w(){var e,t,n,r,a,i,o,c,u,l,s,h,j,E,w,q,P,k,V,A;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return e=p(),t=Object(m.a)(e,3),n=t[0],r=t[1],a=t[2],i=b(n,r,{frequency:79,detune:-19,pan:-1}),o=Object(m.a)(i,3),c=o[0],u=o[1],l=o[2],s=b(n,r,{frequency:78,pan:1}),h=Object(m.a)(s,3),j=h[0],E=h[1],w=h[2],q=y(n,r),P=Object(m.a)(q,2),k=P[0],V=P[1],A=[c,j,V,k,u,E],d.next=7,Object(f.c)("@action.activePreset.mixer.setMasterVolume",v,r,n);case 7:return d.next=9,Object(f.c)("@action.activePreset.setAudioNodeParameter",g,A);case 9:return d.next=11,Object(f.c)("@action.changeActivePreset",x,n,r,A);case 11:return d.next=13,Object(f.b)({type:"@action.createVisualizer",payload:a});case 13:return d.next=15,Object(f.b)({type:"@action.createOsc1Visualizer",payload:l});case 15:return d.next=17,Object(f.b)({type:"@action.createOsc2Visualizer",payload:w});case 17:case"end":return d.stop()}}),O)}function q(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)("@action.grantUserPermissionForAudio",w);case 2:case"end":return e.stop()}}),j)}function P(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([q()]);case 2:case"end":return e.stop()}}),E)}var k=Object(l.a)(),V=[k],A={theme:"light",toggleTheme:Object(c.b)((function(e){e.theme="light"===e.theme?"dark":"light"})),hasUserPermissionForAudio:!1,grantUserPermissionForAudio:Object(c.b)((function(e){e.hasUserPermissionForAudio=!0})),errors:["Must get permission to use AudioContext."],createError:Object(c.b)((function(e,t){e.errors=[].concat(Object(u.a)(e.errors),[t])})),activePreset:{mixer:{masterVolume:0,setMasterVolume:Object(c.b)((function(e,t){e.masterVolume=t}))},audioNodes:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0},{gain:.5},{gain:.5}],setAudioNodeParameter:Object(c.b)((function(e,t){var n=t.audioNodeIndex,r=t.parameter,a=t.value;e.audioNodes[n][r]=a}))},changeActivePreset:Object(c.b)((function(e,t){var n=t.mixer,r=t.audioNodes;e.activePreset.mixer=n,e.activePreset.audioNodes=r})),presets:[{mixer:{masterVolume:0},audioNodes:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0},{gain:.5},{gain:.5}]},{mixer:{masterVolume:.5},audioNodes:[{frequency:163.733,detune:-19},{frequency:158.133,detune:39.667},{gain:.0103},{frequency:3367,Q:0},{gain:.5},{gain:.5}]},{mixer:{masterVolume:0},audioNodes:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0},{gain:.5},{gain:.5}]},{mixer:{masterVolume:0},audioNodes:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0},{gain:.5},{gain:.5}]},{mixer:{masterVolume:0},audioNodes:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0},{gain:.5},{gain:.5}]},{mixer:{masterVolume:0},audioNodes:[{frequency:72,detune:-19},{frequency:71.6,detune:0},{gain:.01},{frequency:5e3,Q:0},{gain:.5},{gain:.5}]}],visualizer:null,createVisualizer:Object(c.b)((function(e,t){e.visualizer=t})),oscillator1Visualizer:null,createOsc1Visualizer:Object(c.b)((function(e,t){e.oscillator1Visualizer=t})),oscillator2Visualizer:null,createOsc2Visualizer:Object(c.b)((function(e,t){e.oscillator2Visualizer=t}))},T=Object(c.c)(A,{middleware:V});k.run(P);var N=T,C=n(8),R=n(9);function z(){var e=Object(C.a)(['\n  font-size: 2rem;\n  font-family: "Roboto Mono";\n  font-weight: 400;\n  font-style: normal;\n']);return z=function(){return e},e}var I=R.a.button(z()),S=n(14);function F(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return F=function(){return e},e}function B(){var e=Object(C.a)(["\n  display: block;\n  text-align: center;\n"]);return B=function(){return e},e}function Q(){var e=Object(C.a)(["\n  margin-right: 100px;\n"]);return Q=function(){return e},e}function D(){var e=Object(C.a)(["\n  display: flex;\n  flex-direction: row;\n  margin: 20px;\n  padding: 20px;\n"]);return D=function(){return e},e}var M=R.a.div(D()),U=R.a.div(Q()),G=R.a.label(B()),W=R.a.div(F()),J=function(e,t){return function(){if(e&&e.current){var n,r=e.current,a=r.getContext("2d"),i=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}(a),o=getComputedStyle(r).getPropertyValue("width").slice(0,-2),c=getComputedStyle(r).getPropertyValue("height").slice(0,-2);r.width=o*i,r.height=c*i,r.style.width="".concat(o,"px"),r.style.height="".concat(c,"px");return function e(){var i=t.frequencyBinCount,o=new Uint8Array(i);t.getByteTimeDomainData(o),a.fillStyle="rgb(200, 200, 200)",a.fillRect(0,0,r.width,r.height),a.lineWidth=6,a.strokeStyle="rgb(0, 0, 0)",a.beginPath();for(var c=1*r.width/i,u=0,l=0;l<i;l++){var s=o[l]/128*r.height/2;0===l?a.moveTo(u,s):a.lineTo(u,s),u+=c}a.lineTo(r.width,r.height/2),a.stroke(),n=requestAnimationFrame(e)}(),function(){cancelAnimationFrame(n)}}}};var $=function(){var e=Object(c.e)((function(e){return e.visualizer})),t=Object(c.e)((function(e){return e.oscillator1Visualizer})),n=Object(c.e)((function(e){return e.oscillator2Visualizer})),i=Object(r.useRef)(),o=Object(r.useRef)(),u=Object(r.useRef)();Object(r.useEffect)(J(i,e)),Object(r.useEffect)(J(o,t)),Object(r.useEffect)(J(u,n));var l=Object(S.a)({},Object(c.e)((function(e){return e.activePreset.mixer})),{},Object(c.d)((function(e){return e.activePreset.mixer}))),s=Object(c.d)((function(e){return e.changeActivePreset})),d=Object(c.e)((function(e){return e.presets})),f=Object(c.e)((function(e){return e.hasUserPermissionForAudio})),p=Object(c.d)((function(e){return e.grantUserPermissionForAudio}));return f?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h3",null,"presets"),a.a.createElement(I,{onClick:function(){return s(d[0])}},"1"),a.a.createElement(I,{onClick:function(){return s(d[1])}},"2"),a.a.createElement(I,{onClick:function(){return s(d[2])}},"3"),a.a.createElement(I,{onClick:function(){return s(d[3])}},"4"),a.a.createElement(I,{onClick:function(){return s(d[4])}},"5"),a.a.createElement(I,{onClick:function(){return s(d[5])}},"6")),a.a.createElement(M,null,a.a.createElement(U,null,a.a.createElement(G,null,"left oscillator"),a.a.createElement(W,null,a.a.createElement(L,{audioNodeIndex:0,parameter:"frequency",step:1e-4,min:20,max:300}),a.a.createElement(L,{audioNodeIndex:0,parameter:"detune",step:1e-4,min:-50,max:50}),a.a.createElement(L,{audioNodeIndex:4,parameter:"gain",step:1e-4,min:0,max:.5}))),a.a.createElement(U,null,a.a.createElement(G,null,"right oscillator"),a.a.createElement(W,null,a.a.createElement(L,{audioNodeIndex:1,parameter:"frequency",min:20,max:300}),a.a.createElement(L,{audioNodeIndex:1,parameter:"detune",min:-50,max:50}),a.a.createElement(L,{audioNodeIndex:5,parameter:"gain",min:0,max:.5}))),a.a.createElement(U,null,a.a.createElement(G,null,"pink noise"),a.a.createElement(W,null,a.a.createElement(L,{audioNodeIndex:3,parameter:"frequency",step:1e-4,min:1,max:1e4}),a.a.createElement(L,{audioNodeIndex:3,parameter:"Q",step:1e-4,min:0,max:15}),a.a.createElement(L,{audioNodeIndex:2,parameter:"gain",step:1e-4,min:0,max:.25}))),a.a.createElement(K,{name:"master volume",step:1e-4,min:0,max:1,values:[l.masterVolume],onChange:function(e){var t=Object(m.a)(e,1)[0];return l.setMasterVolume(t)}})),a.a.createElement("canvas",{ref:o,style:{width:"500px",height:"500px"}}),a.a.createElement("canvas",{ref:u,style:{width:"500px",height:"500px"}}),a.a.createElement("canvas",{ref:i,id:"visualizer",style:{width:"500px",height:"500px"}})):a.a.createElement(I,{onClick:function(){return p()}},"Grant permission for audio")},H=n(15);var K=function(e){var t=e.parameter,n=e.step,r=e.min,i=e.max,o=e.values,c=e.onChange;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px"}},a.a.createElement(H.Range,{step:n,min:r,max:i,direction:H.Direction.Up,values:o,onChange:c,renderTrack:function(e){var t=e.props,n=e.children;return a.a.createElement("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(S.a)({},t.style,{flexGrow:1,width:"36px",display:"flex",justifyContent:"center",height:"300px"})},a.a.createElement("div",{ref:t.ref,style:{width:"5px",height:"100%",borderRadius:"4px",background:Object(H.getTrackBackground)({colors:["#548BF4","#ccc"],values:o,min:r,max:i,direction:H.Direction.Up}),alignSelf:"center"}},n))},renderThumb:function(e){var t=e.props,n=e.isDragged;return a.a.createElement("div",Object.assign({},t,{style:Object(S.a)({},t.style,{height:"42px",width:"42px",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA"})}),a.a.createElement("div",{style:{width:"16px",height:"5px",backgroundColor:n?"#548BF4":"#CCC"}}))}}),a.a.createElement("label",null,t,a.a.createElement("br",null),o[0]))};var L=function(e){var t=e.audioNodeIndex,n=e.parameter,r=e.step,i=void 0===r?1e-4:r,o=e.min,u=e.max,l={parameter:n,step:i,min:o,max:u},s=Object(c.e)((function(e){return e.activePreset.audioNodes})),d=Object(c.d)((function(e){return e.activePreset.setAudioNodeParameter}));return a.a.createElement(K,Object.assign({},l,{values:[s[t][n]],onChange:function(e){var r=Object(m.a)(e,1)[0];return d({audioNodeIndex:t,parameter:n,value:r})}}))};var X=function(){return a.a.createElement(c.a,{store:N},a.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(40);o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.5fa3874a.chunk.js.map